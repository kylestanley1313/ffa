The goal here is to make adding functionality and testing it **fast** while still keeping the package robust.

------------------------------------------------------------------------

## **1. General Development Philosophy**

Think of the package as two main layers:

-   **Implementation layer** â†’ `R/` directory (contains your functions)
-   **Testing & verification layer** â†’ `tests/` (formal automated tests) and `dev/` or scripts (informal experimentation)

During development, youâ€™ll be switching between **coding** and **testing** a lot, so you want fast iteration without full reinstallations every time.

------------------------------------------------------------------------

## **2. Recommended Tooling**

Install these packages first (if you havenâ€™t already):

``` r
install.packages(c("devtools", "roxygen2", "testthat", "usethis"))
```

-   **devtools** â†’ build, load, document, install easily
-   **roxygen2** â†’ generate documentation from inline comments
-   **testthat** â†’ write unit tests
-   **usethis** â†’ automate package setup tasks

------------------------------------------------------------------------

## **3. Directory Structure Recap**

When you ran `usethis::create_package()`, you got something like:

```         
myPackage/
  DESCRIPTION
  NAMESPACE
  R/            # All your .R function scripts
  man/          # Documentation generated by roxygen2
  tests/        # Unit tests live here
```

You will:

-   Add **functions** in `R/`
-   Add **tests** in `tests/testthat/`

------------------------------------------------------------------------

## **4. Step-by-Step Workflow for Adding New Functionality**

### **Step 1 â€” Create the function**

In `R/` create a `.R` file, one per logical group of functions (not necessarily one per function). Example: `R/mean_utils.R`

``` r
#' Compute the mean of a numeric vector
#'
#' This function computes the arithmetic mean.
#'
#' @param x Numeric vector.
#' @return Numeric scalar, the mean of \code{x}.
#' @examples
#' my_mean(c(1, 2, 3))
my_mean <- function(x) {
  if (!is.numeric(x)) stop("x must be numeric")
  sum(x) / length(x)
}
```

âš  **Note:** The `#'` comments are roxygen2 docstrings. They will auto-generate help files.

------------------------------------------------------------------------

### **Step 2 â€” Load the package in â€œdevelopment modeâ€**

Instead of reinstalling every time, run:

``` r
devtools::load_all()
```

This simulates installing your package, compiles and loads all R files into your environment, and makes your new function available instantly.

ðŸ’¡ You can bind this to a hotkey in RStudio (`Cmd + Shift + L` by default).

------------------------------------------------------------------------

### **Step 3 â€” Interactive testing while coding**

Two main ways:

1.  **Inline in your Console** after `load_all()`

    ``` r
    my_mean(c(1, 2, 3, 4))
    ```

2.  **dev/ playground scripts** Create a `dev/` folder (not part of the package build) and put â€œscratchpadâ€ scripts in it for quick experiments, e.g., `dev/test_my_mean.R`:

    ``` r
    devtools::load_all()
    my_mean(c(5, 10, 15))
    ```

    This keeps your testing code separate from production code.

------------------------------------------------------------------------

### **Step 4 â€” Add formal unit tests**

If you havenâ€™t already set up `testthat`:

``` r
usethis::use_testthat()
```

Then create a test file:

``` r
usethis::use_test("my_mean")
```

It will create `tests/testthat/test-my_mean.R`:

``` r
test_that("my_mean works for numeric vectors", {
  expect_equal(my_mean(c(1, 2, 3)), 2)
  expect_equal(my_mean(c(10, 20)), 15)
})

test_that("my_mean errors for non-numeric input", {
  expect_error(my_mean("a"))
})
```

Run tests:

``` r
devtools::test()
```

ðŸ’¡ Use `Cmd + Shift + T` in RStudio for quick test runs.

------------------------------------------------------------------------

### **Step 5 â€” Document & check**

Whenever you add or modify functions:

``` r
devtools::document()  # Generates man/*.Rd help files
devtools::check()     # Runs R CMD check for full compliance
```

If you use roxygen2 inline docs, `document()` will update your help files automatically.

------------------------------------------------------------------------

### **Step 6 â€” Install (if needed)**

Once youâ€™re happy and want a â€œrealâ€ install:

``` r
devtools::install()
```

But for development, stick to `load_all()` for speed.

------------------------------------------------------------------------

## **5. A Typical Daily Development Loop**

1.  Write or edit a function in `R/`.
2.  Run `Cmd + Shift + L` (`devtools::load_all()`).
3.  Play with the function in Console or in `dev/` scripts.
4.  Write/update `testthat` tests.
5.  Run `Cmd + Shift + T` (`devtools::test()`).
6.  Repeat until satisfied.
7.  Run `devtools::document()` and `devtools::check()` before committing changes.

------------------------------------------------------------------------

## **6. Good Practices**

-   **One function per responsibility** â†’ makes testing easier.
-   **One test file per R file** â†’ easy to find related tests.
-   **Use meaningful examples in roxygen docs** â†’ they double as checks in `devtools::check()`.
-   **Keep scratch code in `dev/`**, not in R scripts.
-   **Run `check()` often** â†’ catches namespace/documentation issues before release.

------------------------------------------------------------------------

If you want, I can give you a **visual diagram** of this workflow showing how `R/`, `tests/`, and `dev/` interact during development. It makes the flow much easier to remember.
